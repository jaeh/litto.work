var draggableContainer=document.getElementsByClassName("draggables")[0];var draggables=document.getElementsByClassName("drag");var maxZIndex=draggables.length*5;var dragged=false;var startPos=false;var currentZIndex=1;var forEach=function c(a,b){for(var d=0;d<a.length;d++){if(a.hasOwnProperty(d)){b(a[d])}}};var cl={has:function c(a,b){return a.className&&a.className.indexOf(b)>-1},add:function c(a,b){if(!cl.has(a,b)){a.className=a.className?a.className+" "+b:b}},rm:function c(a,b){if(cl.has(a,b)){a.className=a.className.replace(b,"").trim()}},toggle:function c(a,b){if(cl.has(a,b)){cl.rm(a,b)}else{cl.add(a,b)}}};var onload=function b(a){return function(b){if(cl.has(b.target,"bg")){var c=b.target;var d=c.naturalWidth;var e=c.naturalHeight;var f=0;var g=0;var h=window.innerWidth*.7;if(d>h){var i=d/h+.1;d/=i;e/=i}var j=window.innerHeight*.7;if(e>j){var k=e/j+.1;e/=k;d/=k}var l=window.innerWidth-d;var m=window.innerHeight-e;f=Math.random()*l;g=Math.random()*m;f="".concat(Math.floor(percentFromPixels("Width",f)),"%");g="".concat(Math.floor(percentFromPixels("Height",g)),"%");a.style.left=f;a.style.top=g}}};forEach(draggables,function(a){var b=Math.random();var c={left:"100%",top:"100%"};if(b>0.7){c.left="-".concat(c.left)}else if(b<0.3){c.top="-".concat(c.top)}a.style.left=c.left;a.style.top=c.top;var d=a.getElementsByClassName("bg")[0];if(d){d.addEventListener("load",onload(a));setTimeout(function(){d.src=d.src},1)}});var touchHandler=function e(a){var b=a.changedTouches[0];var c=document.createEvent("MouseEvent");c.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[a.type],true,true,window,1,b.screenX,b.screenY,b.clientX,b.clientY,false,false,false,false,0,null);if(cl.has(b.target,"bg")){if(b.target===b.currentTarget){return true}}b.target.dispatchEvent(c);a.preventDefault();a.stopPropagation();return false};var doNothing=function b(a){a.preventDefault();return false};var $=function b(a){return document.getElementById(a)};var getPos=function b(a){return parseInt(a.replace("%",""))};var percentFromPixels=function c(a,b){return b/window["inner".concat(a)]*100};var pixelsFromPercent=function c(a,b){return b*window["inner".concat(a)]/100};var isOutOfBounds=function b(a){return a.clientX>=window.innerWidth||a.clientX<=0||a.clientY>=window.innerHeight||a.clientY<=0};var drag=function b(a){dragged=a.currentTarget;cl.add(dragged,"dragged");startPos={left:pixelsFromPercent("Width",getPos(dragged.style.left)),top:pixelsFromPercent("Height",getPos(dragged.style.top))};currentZIndex+=1;dragged.style.zIndex=currentZIndex;dragged.offset={left:a.clientX-pixelsFromPercent("Width",getPos(dragged.style.left)),top:a.clientY-pixelsFromPercent("Height",getPos(dragged.style.top))};dragged.style.opacity=0.8;document.addEventListener("mousemove",mousemove);document.addEventListener("mouseup",drop);document.addEventListener("mouseout",dropIfOutOfBounds)};var drop=function a(){if(!dragged){return}forEach(draggables,function(a){cl.rm(a,"dropped");cl.rm(a,"dragged")});cl.add(dragged,"dropped");dragged.style.opacity=1;document.removeEventListener("mousemove",mousemove);document.removeEventListener("mouseup",drop);document.removeEventListener("mouseout",dropIfOutOfBounds);dragged=false;startPos=false};var dropIfOutOfBounds=function b(a){if(isOutOfBounds(a)){drop(a)}};var mousemove=function b(a){if(dragged){var c={left:window.innerWidth-dragged.clientWidth,top:window.innerHeight-dragged.clientHeight};var d=a.clientX-dragged.offset.left;if(d<0){d=0}else if(d>c.left){d=c.left}dragged.style.left="".concat(percentFromPixels("Width",d),"%");var e=a.clientY-dragged.offset.top;if(e<0){e=0}else if(e>c.top){e=c.top}dragged.style.top="".concat(percentFromPixels("Height",e),"%")}};window.onload=function(){forEach(draggables,function(b){b.addEventListener("dragstart",doNothing);b.addEventListener("mousedown",drag);b.addEventListener("touchstart",touchHandler,true);b.addEventListener("touchmove",touchHandler,true);b.addEventListener("touchend",touchHandler,true);b.addEventListener("touchcancel",touchHandler,true);var c=b.getElementsByTagName("a")[0];if(c){c.addEventListener("touchend",function(a){a.stopPropagation();return false})}})};var menuContainer=document.getElementsByClassName("nav")[0];if(menuContainer){var active=menuContainer.getElementsByClassName("active")[0];var toggleMenu=function b(a){a.preventDefault();cl.toggle(menuContainer,"show");return false};if(active){active.addEventListener("click",toggleMenu)}}