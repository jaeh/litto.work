var D=document;var M=Math;var W=window;var $=function e(a){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:D;var c=a.indexOf(".")===0;var d=a.indexOf("#")===0;if(c){return b.getElementsByClassName(a.substr(1,a.length))}else if(d){return b.getElementById(a.substr(1,a.length))}else{return b.getElementsByTagName(a)}};var draggableContainer=$(".draggables")[0];var draggables=$(".drag");var maxZIndex=draggables.length*5;var dragged=false;var startPos=false;var currentZIndex=1;var forEach=function c(a,b){for(var d=0;d<a.length;d++){if(a.hasOwnProperty(d)){b(a[d])}}};var cl={has:function c(a,b){return a.className&&a.className.indexOf(b)>-1},add:function d(a,b){if(!cl.has(a,b)){if(a.className){b=a.className+" "+b}a.className=b}},rm:function c(a,b){if(cl.has(a,b)){a.className=a.className.replace(b,"").trim()}},toggle:function c(a,b){if(cl.has(a,b)){cl.rm(a,b)}else{cl.add(a,b)}}};var onload=function b(a){return function(b){if(cl.has(b.target,"bg")){var c=b.target;var d=c.naturalWidth;var e=c.naturalHeight;var f=0;var g=0;var h=W.innerWidth*.7;if(d>h){var i=d/h+.1;d/=i;e/=i}var j=W.innerHeight*.7;if(e>j){var k=e/j+.1;e/=k;d/=k}var l=W.innerWidth-d;var m=W.innerHeight-e;f=M.random()*l;g=M.random()*m;f="".concat(M.floor(percentFromPixels("Width",f)),"%");g="".concat(M.floor(percentFromPixels("Height",g)),"%");a.style.left=f;a.style.top=g;a.style.transition="left 500ms, top 500ms"}}};forEach(draggables,function(a){var b=M.random();var c={left:"100%",top:"100%"};if(b>0.7){c.left="-".concat(c.left)}else if(b<0.3){c.top="-".concat(c.top)}a.style.left=c.left;a.style.top=c.top;var d=$(".bg",a)[0];if(d){d.addEventListener("load",onload(a));setTimeout(function(){d.src=d.src},1)}});var touchHandler=function f(a){var b=a.changedTouches[0];var c=D.createEvent("MouseEvent");var e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[a.type];c.initMouseEvent(e,true,true,W,1,b.screenX,b.screenY,b.clientX,b.clientY,false,false,false,false,0,null);b.target.dispatchEvent(c);a.preventDefault();a.stopPropagation();return false};var doNothing=function b(a){a.preventDefault();return false};var getPos=function b(a){return parseInt(a.replace("%",""))};var percentFromPixels=function c(a,b){return b/W["inner".concat(a)]*100};var pixelsFromPercent=function c(a,b){return b*W["inner".concat(a)]/100};var isOutOfBounds=function b(a){return a.clientX>=W.innerWidth||a.clientX<=0||a.clientY>=W.innerHeight||a.clientY<=0};var drag=function b(a){dragged=a.currentTarget.parentNode;cl.add(dragged,"dragged");startPos={left:pixelsFromPercent("Width",getPos(dragged.style.left)),top:pixelsFromPercent("Height",getPos(dragged.style.top))};currentZIndex+=1;dragged.style.zIndex=currentZIndex;dragged.offset={left:a.clientX-pixelsFromPercent("Width",getPos(dragged.style.left)),top:a.clientY-pixelsFromPercent("Height",getPos(dragged.style.top))};dragged.style.opacity=0.8;dragged.style.transition=null;D.addEventListener("mousemove",mousemove);D.addEventListener("mouseup",drop);D.addEventListener("mouseout",dropIfOutOfBounds)};var drop=function a(){if(!dragged){return}forEach(draggables,function(a){cl.rm(a,"dragged");if(a===dragged){cl.add(dragged,"dropped")}else{cl.rm(a,"dropped")}});dragged.style.opacity=1;dragged.style.transition="left 500ms, top 500ms";dragged=false;startPos=false};var dropIfOutOfBounds=function b(a){if(isOutOfBounds(a)){drop(a)}};var mousemove=function b(a){if(dragged){var c={left:W.innerWidth-dragged.clientWidth,top:W.innerHeight-dragged.clientHeight};var d=a.clientX-dragged.offset.left;if(d<0){d=0}else if(d>c.left){d=c.left}dragged.style.left="".concat(percentFromPixels("Width",d),"%");var e=a.clientY-dragged.offset.top;if(e<0){e=0}else if(e>c.top){e=c.top}dragged.style.top="".concat(percentFromPixels("Height",e),"%")}};W.onload=function(){forEach(draggables,function(b){var c=$(".bg",b)[0];if(c){c.addEventListener("dragstart",doNothing);c.addEventListener("mousedown",drag);c.addEventListener("touchstart",touchHandler,true);c.addEventListener("touchmove",touchHandler,true);c.addEventListener("touchend",touchHandler,true);c.addEventListener("touchcancel",touchHandler,true)}var d=$("a",b)[0];if(d){d.addEventListener("touchend",function(a){a.stopPropagation();return false})}})};var menuContainer=$(".nav")[0];if(menuContainer){var active=$(".active",menuContainer)[0];var toggleMenu=function b(a){a.preventDefault();cl.toggle(menuContainer,"show");return false};if(active){active.addEventListener("click",toggleMenu)}}